/*!
 * viewport-units-buggyfill v0.5.4
 * @web: https://github.com/rodneyrehm/viewport-units-buggyfill/
 * @author: Rodney Rehm - http://rodneyrehm.de/en/
 */
(function(a,b){if(typeof define==="function"&&define.amd){define([],b)}else{if(typeof exports==="object"){module.exports=b()}else{a.viewportUnitsBuggyfill=b()}}}(this,function(){var j=false;var g;var A=window.navigator.userAgent;var b=/([+-]?[0-9.]+)(vh|vw|vmin|vmax)/g;var v=[].forEach;var n;var r;var z;var l=/MSIE [0-9]\./i.test(A);var o=/MSIE [0-8]\./i.test(A);var k=A.indexOf("Opera Mini")>-1;var d=/(iPhone|iPod|iPad).+AppleWebKit/i.test(A)&&(function(){var C=A.match(/OS (\d)/);return C&&C.length>1&&parseInt(C[1])<8})();var t=(function(){var E=A.indexOf(" Android ")>-1;if(!E){return false}var D=A.indexOf("Version/")>-1;if(!D){return false}var C=parseFloat((A.match("Android ([0-9.]+)")||[])[1]);return C<=4.4})();if(!l){l=!!navigator.userAgent.match(/Trident.*rv[ :]*11\./)}function h(C,E){var D;return function(){var G=this;var F=arguments;var H=function(){C.apply(G,F)};clearTimeout(D);D=setTimeout(H,E)}}function f(){try{return window.self!==window.top}catch(C){return true}}function c(C){if(j){return}if(C===true){C={force:true}}g=C||{};g.isMobileSafari=d;g.isBadStockAndroid=t;if(o||(!g.force&&!d&&!l&&!t&&!k&&(!g.hacks||!g.hacks.required(g)))){if(window.console&&o){console.info("viewport-units-buggyfill requires a proper CSSOM and basic viewport unit support, which are not available in IE8 and below")}return{init:function(){}}}g.hacks&&g.hacks.initialize(g);j=true;z=document.createElement("style");z.id="patched-viewport";document.head.appendChild(z);m(function(){var D=h(i,g.refreshDebounceWait||100);window.addEventListener("orientationchange",D,true);window.addEventListener("pageshow",D,true);if(g.force||l||f()){window.addEventListener("resize",D,true);g._listeningToResize=true}g.hacks&&g.hacks.initializeEvents(g,i,D);i()})}function x(){z.textContent=w();z.parentNode.appendChild(z)}function i(){if(!j){return}s();setTimeout(function(){x()},1)}function s(){r=[];v.call(document.styleSheets,function(C){if(C.ownerNode.id==="patched-viewport"||!C.cssRules||C.ownerNode.getAttribute("data-viewport-units-buggyfill")==="ignore"){return}if(C.media&&C.media.mediaText&&window.matchMedia&&!window.matchMedia(C.media.mediaText).matches){return}v.call(C.cssRules,q)});return r}function q(E){if(E.type===7){var C;try{C=E.cssText}catch(D){return}b.lastIndex=0;if(b.test(C)){r.push([E,null,C]);g.hacks&&g.hacks.findDeclarations(r,E,null,C)}return}if(!E.style){if(!E.cssRules){return}v.call(E.cssRules,function(F){q(F)});return}v.call(E.style,function(F){var G=E.style.getPropertyValue(F);if(E.style.getPropertyPriority(F)){G+=" !important"}b.lastIndex=0;if(b.test(G)){r.push([E,F,G]);g.hacks&&g.hacks.findDeclarations(r,E,F,G)}})}function w(){n=u();var E=[];var C=[];var D;var F;r.forEach(function(J){var I=p.apply(null,J);var G=I.selector.length?(I.selector.join(" {\n")+" {\n"):"";var H=new Array(I.selector.length+1).join("\n}");if(!G||G!==D){if(C.length){E.push(D+C.join("\n")+F);C.length=0}if(G){D=G;F=H;C.push(I.content)}else{E.push(I.content);D=null;F=null}return}if(G&&!D){D=G;F=H}C.push(I.content)});if(C.length){E.push(D+C.join("\n")+F)}if(k){E.push("* { content: normal !important; }")}return E.join("\n\n")}function p(H,D,G){var C;var E=[];C=G.replace(b,y);if(g.hacks){C=g.hacks.overwriteDeclaration(H,D,C)}if(D){E.push(H.selectorText);C=D+": "+C+";"}var F=H.parentRule;while(F){E.unshift("@media "+F.media.mediaText);F=F.parentRule}return{selector:E,content:C}}function y(C,F,E){var D=n[E];var G=parseFloat(F)/100;return(G*D)+"px"}function u(){var D=window.innerHeight;var C=window.innerWidth;return{vh:D,vw:C,vmax:Math.max(C,D),vmin:Math.min(C,D)}}function m(C){var D=0;var E=function(){D--;if(!D){C()}};v.call(document.styleSheets,function(F){if(!F.href||B(F.href)===B(location.href)||F.ownerNode.getAttribute("data-viewport-units-buggyfill")==="ignore"){return}D++;e(F.ownerNode,E)});if(!D){C()}}function B(C){return C.slice(0,C.indexOf("/",C.indexOf("://")+3))}function e(D,C){a(D.href,function(){var E=document.createElement("style");E.media=D.media;E.setAttribute("data-href",D.href);E.textContent=this.responseText;D.parentNode.replaceChild(E,D);C()},C)}function a(D,F,C){var E=new XMLHttpRequest();if("withCredentials" in E){E.open("GET",D,true)}else{if(typeof XDomainRequest!=="undefined"){E=new XDomainRequest();E.open("GET",D)}else{throw new Error("cross-domain XHR not supported")}}E.onload=F;E.onerror=C;E.send();return E}return{version:"0.5.4",findProperties:s,getCss:w,init:c,refresh:i}}));